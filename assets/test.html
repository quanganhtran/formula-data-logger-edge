<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.css">

    <script src="/bower_components/jquery/dist/jquery.js"></script>
    <!--<script src="/bower_components/bootstrap/dist/js/bootstrap.js"></script>-->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/bower_components/angular/angular.js"></script>
    <script src="uib/dist/ui-bootstrap.js"></script>
    <style>
        body {background-color: #eee}
		#aggregation {text-align: right}
    </style>
    <title>Data logger</title>
</head>
<body ng-app="DataLogger" ng-controller="DataLoggerCtrl">
<div class="top col-md-12">
    <div class="col-md-2">Identifier: {{identifier.value}}</div><div class="col-md-2">Total IC: {{totalIc.value}}</div>
</div>
<uib-tabset>
    <uib-tab index="0" heading="Overview">
		<div id="aggregation" class="col-md-4 well">
			<label>
				Min Cell <input disabled ng-model="agg.cellMin" type="text">
			</label><br>
			<label>
				Max Cell <input disabled ng-model="agg.cellMax" type="text">
			</label><br>
			<label>
				Sum Cell <input disabled ng-model="agg.cellSum" type="number" step="0.01">
			</label><br>
			<label>
				Min Temp <input disabled ng-model="agg.tempMin" type="text">
			</label><br>
			<label>
				Max Temp <input disabled ng-model="agg.tempMax" type="text">
			</label><br>
			<label>
				Avg Temp <input disabled ng-model="agg.tempAvg" type="text">
			</label>
		</div>
        <div id="status_flags" class="col-md-4 well">
            <div ng-repeat="flag in statusFlags">
                <label>
                    <input disabled ng-checked="{{flag.value}}" type="checkbox"> {{flag.name}}
                </label>
            </div>
        </div>
        <div id="ext_status_flags" class="col-md-4 well">
            <div ng-repeat="flag in extStatusFlags">
                <label>
                    <input disabled ng-checked="{{flag.value}}" type="checkbox"> {{flag.name}}
                </label>
            </div>
        </div>
        <div id="settings_flags" class="col-md-4 well">
            <h3>Settings</h3>
            <div ng-repeat="flag in settingsFlags">
                <label>
                    <input ng-checked="{{flag.value}}" ng-model="flag.value" type="checkbox"> {{flag.name}}
                </label>
            </div>
            <div>
                <button class="btn btn-primary" ng-click="updateSettings()"
						uib-popover="Saved!" popover-placement="right" popover-popup-close-delay="500"
						>Save</button>
		{{settingsFlags}}
            </div>
        </div>
		<div id="fan_dc" class="col-md-4 well">
			<label>
				fan1_dc <input disabled ng-model="fan1Dc.value" type="text">
			</label><br>
			<label>
				fan2_dc <input disabled ng-model="fan2Dc.value" type="text">
			</label>
		</div>
        <div id="io_state" class="col-md-4 well">
            <div ng-repeat="flag in ioState">
                <label>
                    <input disabled ng-checked="{{flag.value}}" type="checkbox"> {{flag.name}}
                </label>
            </div>
        </div>
    </uib-tab>
    <uib-tab index="1" heading="Cell voltages">
        <div class="col-md-2" ng-repeat="cellTable in cellTables">
            <table class="table">
                <tbody>
                <tr ng-repeat="cell in cellTable.cells">
                    <td>{{ cell.name }}</td>
                    <td>{{ cell.value }}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </uib-tab>
    <uib-tab index="2" heading="Cell temperature">
        <div class="col-md-2" ng-repeat="tempTable in tempTables">
            <table class="table">
                <tbody>
                <tr ng-repeat="cell in tempTable.cells">
                    <td>{{ cell.name }}</td>
                    <td>{{ cell.value }}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </uib-tab>
</uib-tabset>
<script src="js/test.js" type="text/javascript"></script>
</body>
</html>
